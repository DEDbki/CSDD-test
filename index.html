<!DOCTYPE html>
<html lang="lv">
<head>
  <title>CSDD Tests</title>
  <link rel="style" href="style.css" > 
</head>
<body>
<h1>Autovadītāja tests</h1>

<div class="flex-container">
  <div id="timer">10:00</div>
</div>

<div id="attels0" class="atteluKonteineris">
    <p>Jums vajag atbildēt uz 10 jautājumiem.</p>
    <button onclick="Saktest()">Sākt testu.</button>
</div>

<div id="attels1" class="atteluKonteineris">
    <img src="foto1.png" alt="foto1">
    <form>
    <input type="radio" name="q1" value="0"> <label>Par to, ka nejūtas drošs un lūdz Jūs ievērot drošu intervālu. </label><br>
    <input type="radio" name="q1" value="1"> <label>Brīdina, ka vēlas veikt kreiso pagriezienu. </label><br>
    <input type="radio" name="q1" value="0"> <label>Brīdina, ka ir Jūs pamanījis. </label>
  </form>
  <button onclick="nakamaisAttels()">Nākamais attēls</button>
</div>
<div id="attels2" class="atteluKonteineris">
  <img src="foto2.png" alt="foto2">
  <form>
    <input type="radio" name="q2" value="1"> <label>Automobiļa vadītājam. </label><br>
    <input type="radio" name="q2" value="0"> <label>Velosipēda vadītājam. </label><br>
  </form>
  <button onclick="ieprieksejaisAttels()">Iepriekšējais attēls</button>
  <button onclick="nakamaisAttels()">Nākamais attēls</button>
</div>
<div id="attels3" class="atteluKonteineris">
    <img src="foto3.png" alt="foto3">
    <form>
      <input type="radio" name="q3" value="0"> <label>Šķērsosiet krustojumu pirmais. </label><br>
      <input type="radio" name="q3" value="0"> <label>Dosiet ceļu vieglā automobiļa un velosipēda vadītājam. </label><br>
      <input type="radio" name="q3" value="0"> <label>Dosiet ceļu tikai velosipēda vadītājam. </label><br>
      <input type="radio" name="q3" value="1"> <label>Dosiet ceļu tikai vieglā automobiļa vadītājam. </label>
    </form>
    <button onclick="ieprieksejaisAttels()">Iepriekšējais attēls</button>
    <button onclick="nakamaisAttels()">Nākamais attēls</button>
  </div>
  <div id="attels4" class="atteluKonteineris">
    <img src="foto4.png" alt="foto4">
    <form>
      <input type="radio" name="q4" value="0"> <label>Atļauts. </label><br>
      <input type="radio" name="q4" value="1"> <label>Aizliegts.</label><br>
    </form>
    <button onclick="ieprieksejaisAttels()">Iepriekšējais attēls</button>
    <button onclick="nakamaisAttels()">Nākamais attēls</button>
  </div>
  <div id="attels5" class="atteluKonteineris">
    <img src="foto5.png" alt="foto5">
    <form>
      <input type="radio" name="q5" value="0"> <label>Priekšā būs autobusa pieturvieta. </label><br>
      <input type="radio" name="q5" value="0"> <label>Labā josla ir vienvirziena josla. </label><br>
      <input type="radio" name="q5" value="1"> <label>Pa labo joslu atļauts braukt pasažieru sabiedriskajiem transportlīdzekļiem, elektromobiļiem un taksometriem.</label>
    </form>
    <button onclick="ieprieksejaisAttels()">Iepriekšējais attēls</button>
    <button onclick="nakamaisAttels()">Nākamais attēls</button>
  </div>
  <div id="attels6" class="atteluKonteineris">
    <img src="foto6.png" alt="foto6">
    <form>
      <input type="radio" name="q6" value="0"> <label>Atļauts. </label><br>
      <input type="radio" name="q6" value="1"> <label>Aizliegts. </label><br>
    </form>
    <button onclick="ieprieksejaisAttels()">Iepriekšējais attēls</button>
    <button onclick="nakamaisAttels()">Nākamais attēls</button>
  </div>
  <div id="attels7" class="atteluKonteineris">
    <img src="foto7.png" alt="foto7">
    <form>
      <input type="radio" name="q7" value="0"> <label>Braukt ar ātrumu, kas mazāks par 30 km/h. </label><br>
      <input type="radio" name="q7" value="0"> <label>Apstāties un stāvēt ceļa malā. </label><br>
      <input type="radio" name="q7" value="1"> <label>Apdzīt transportlīdzekļus. </label>
    </form>
    <button onclick="ieprieksejaisAttels()">Iepriekšējais attēls</button>
    <button onclick="nakamaisAttels()">Nākamais attēls</button>
  </div>
  <div id="attels8" class="atteluKonteineris">
    <img src="foto8.png" alt="foto8">
    <form>
      <input type="radio" name="q8" value="1"> <label>Aizliegts. </label><br>
      <input type="radio" name="q8" value="0"> <label>Atļauts. </label><br>
    </form>
    <button onclick="ieprieksejaisAttels()">Iepriekšējais attēls</button>
    <button onclick="nakamaisAttels()">Nākamais attēls</button>
  </div>
  <div id="attels9" class="atteluKonteineris">
    <img src="foto9.png" alt="foto9">
    <form>
      <input type="radio" name="q9" value="0"> <label>Pirms krustojumiem, kad jādod ceļš. </label><br>
      <input type="radio" name="q9" value="1"> <label>Pirms dzelzceļa pārbrauktuves, ja ir jāpalaiž vilciens. </label><br>
      <input type="radio" name="q9" value="0"> <label>Satiksmes sastrēgumos. </label>
    </form>
    <button onclick="ieprieksejaisAttels()">Iepriekšējais attēls</button>
    <button onclick="nakamaisAttels()">Nākamais attēls</button>
  </div>

<div id="attels10" class="atteluKonteineris">
  <img src="foto10.png" alt="foto10">
  <form>
    <input type="radio" name="q10" value="1"> <label>Apdzīšana. </label><br>
    <input type="radio" name="q10" value="0"> <label>Apbraukšana. </label><br>
    <input type="radio" name="q10" value="0"> <label>Apsteigšana. </label>
  </form>
  <button onclick="ieprieksejaisAttels()">Iepriekšējais attēls</button>
  <button onclick="finishQuiz()">Pabeigt testu</button>
</div>

<div id="attels11" class="atteluKonteineris">
  <p id="score"></p>
  <p id="elapsed"></p>
  <p id="result"></p>
  <button onclick="restartQuiz()">Sākt no jauna</button>
</div>

<script>
let currentQuestion = 0;
let totalQuestions = 10;
let startTime;
let timerInterval;
let timeLimit = 600;

function startTimer() {
  startTime = Date.now();
  timerInterval = setInterval(() => {
    let elapsed = Math.floor((Date.now() - startTime) / 1000);
    let remaining = timeLimit - elapsed;
    if (remaining <= 0) {
      clearInterval(timerInterval);
      finishQuiz();
    }
    let minutes = Math.floor(remaining / 60);
    let seconds = remaining % 60;
    document.getElementById("timer").textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
  }, 1000);
}

function sleptAttelus() {
  document.querySelectorAll('.atteluKonteineris').forEach(el => el.style.display = 'none');
}

function paraditAttelu(nr) {
  document.getElementById("attels" + nr).style.display = "block";
}

function nakamaisAttels() {
  if (currentQuestion < totalQuestions) {
    sleptAttelus();
    currentQuestion++;
    paraditAttelu(currentQuestion);
  }
}

function ieprieksejaisAttels() {
  if (currentQuestion > 1) {
    sleptAttelus();
    currentQuestion--;
    paraditAttelu(currentQuestion);
  }
}

function finishQuiz() {
  clearInterval(timerInterval);
  let correctAnswers = 0;
  for (let i = 1; i <= totalQuestions; i++) {
    const selected = document.querySelector(`input[name=q${i}]:checked`);
    if (selected && selected.value === "1") correctAnswers++;
  }
  let totalTime = Math.floor((Date.now() - startTime) / 1000);
  document.getElementById("score").textContent = `Pareizās atbildes: ${correctAnswers} no ${totalQuestions}`;
  document.getElementById("elapsed").textContent = `Pavadītais laiks: ${Math.floor(totalTime / 60)}:${(totalTime % 60).toString().padStart(2, '0')}`;
  radatresult(correctAnswers);
  sleptAttelus();
  paraditAttelu(11);
}

function radatresult(score) {
    const resultText = score > 8 ? "Jūs nokārtojāt testu!" : "Jūs nenokartojāt testu.";
    document.getElementById("result").textContent = resultText;
}

function Saktest() {
    currentQuestion ++;
    sleptAttelus();
    paraditAttelu(currentQuestion);
    startTimer();
}

function restartQuiz() {
  currentQuestion = 1;
  document.querySelectorAll('input[type=radio]').forEach(r => r.checked = false);
  sleptAttelus();
  paraditAttelu(currentQuestion);
  startTimer();
}

sleptAttelus();
paraditAttelu(currentQuestion);

</script>
</body>
</html>
